 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPhone Hardware Identity Labs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #0071e3; --success: #32d74b; --warning: #ff9f0a; }
        body { background-color: #000; color: #fff; font-family: 'Inter', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(20px); }
        .terminal { font-family: 'JetBrains Mono', monospace; background: rgba(0,0,0,0.5); border: 1px solid #333; }
        .glow-success { box-shadow: 0 0 20px rgba(50, 215, 75, 0.2); border-color: var(--success); }
        .glow-warning { box-shadow: 0 0 20px rgba(255, 159, 10, 0.2); border-color: var(--warning); }
        .scanning-line { height: 2px; background: var(--accent); position: absolute; width: 100%; top: 0; animation: scan 3s linear infinite; box-shadow: 0 0 15px var(--accent); }
        @keyframes scan { from { top: 0%; } to { top: 100%; } }
    </style>
</head>
<body class="p-4 md:p-10 min-h-screen flex flex-col items-center">

    <div class="max-w-4xl w-full space-y-8">
        <header class="text-center space-y-2">
            <h1 class="text-4xl font-extrabold tracking-tight">Hardware <span class="text-blue-500">Fingerprint</span></h1>
            <p class="text-gray-400 text-sm uppercase tracking-widest">6-Point Registry Resolver v3.0</p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="glass p-6 rounded-2xl space-y-4">
                <h3 class="text-xs font-bold text-gray-500 uppercase">Hardware Signals</h3>
                <div class="space-y-3 text-[13px]" id="signalList">
                    <div class="flex justify-between"><span class="text-gray-400">Height</span><span id="sigHeight" class="font-mono">--</span></div>
                    <div class="flex justify-between"><span class="text-gray-400">Refresh</span><span id="sigHz" class="font-mono text-blue-400">--</span></div>
                    <div class="flex justify-between"><span class="text-gray-400">GPU Core</span><span id="sigGpu" class="font-mono">--</span></div>
                    <div class="flex justify-between"><span class="text-gray-400">RAM</span><span id="sigRam" class="font-mono">--</span></div>
                    <div class="flex justify-between"><span class="text-gray-400">Gamut</span><span id="sigGamut" class="font-mono">--</span></div>
                    <div class="flex justify-between"><span class="text-gray-400">Precision</span><span id="sigPrec" class="font-mono">--</span></div>
                </div>
                <button onclick="runDetection()" class="w-full py-3 bg-blue-600 hover:bg-blue-500 rounded-xl font-bold transition-all active:scale-95 mt-4">
                    Analyze Hardware
                </button>
            </div>

            <div id="resultCard" class="md:col-span-2 glass p-8 rounded-2xl relative overflow-hidden flex flex-col justify-center items-center text-center border-dashed border-2 border-gray-700">
                <div id="scannerLine" class="hidden scanning-line"></div>
                <div id="idleState" class="space-y-4">
                    <div class="w-12 h-12 border-4 border-gray-800 border-t-blue-500 rounded-full animate-spin mx-auto hidden" id="loader"></div>
                    <p class="text-gray-500" id="idleText">Scan required to sync hardware ID.</p>
                </div>
                <div id="successState" class="hidden space-y-2">
                    <span id="confBadge" class="px-3 py-1 bg-green-500/20 text-green-400 text-[10px] font-bold uppercase rounded-full">Identity Verified</span>
                    <h2 id="deviceName" class="text-4xl font-black italic">--</h2>
                    <p id="deviceId" class="text-lg text-gray-400 font-mono">--</p>
                    <p id="resolveMethod" class="text-[10px] text-blue-400 pt-4 font-mono uppercase tracking-widest"></p>
                </div>
            </div>
        </div>

        <div class="terminal rounded-xl p-4 text-[10px] leading-relaxed">
            <div id="logOutput" class="space-y-1 h-24 overflow-y-auto font-mono">
                <div class="text-gray-600">> System initialized. Ready for handshake.</div>
            </div>
        </div>

        <div id="possibility-engine" class="mt-4">
            <h3 class="text-[10px] font-bold text-gray-500 uppercase mb-3">Probable Matches</h3>
            <div id="candidate-list" class="grid grid-cols-1 md:grid-cols-2 gap-3"></div>
        </div>
    </div>

    <script>
        // 51+ Model Master Registry (6-Point Signatures)
        // h: height, z: refresh, g: gpu, r: ram, gamut: color, p: precision
        const IPHONE_REGISTRY = [
            { n: "iPhone 17 Pro Max", id: "A3257", h: 932, z: 120, g: "A19", r: 12, gamut: "P3", p: 23 },
            { n: "iPhone 17 Pro", id: "A3256", h: 874, z: 120, g: "A19", r: 8, gamut: "P3", p: 23 },
            { n: "iPhone 17 Air", id: "A3114", h: 912, z: 120, g: "A19", r: 8, gamut: "P3", p: 23 },
            { n: "iPhone 16 Pro Max", id: "A3296", h: 932, z: 120, g: "A18", r: 8, gamut: "P3", p: 23 },
            { n: "iPhone 16 Pro", id: "A3293", h: 852, z: 120, g: "A18", r: 8, gamut: "P3", p: 23 },
            { n: "iPhone 16 Plus", id: "A3290", h: 932, z: 60, g: "A18", r: 8, gamut: "P3", p: 23 },
            { n: "iPhone 16", id: "A3287", h: 852, z: 60, g: "A18", r: 8, gamut: "P3", p: 23 },
            { n: "iPhone 16e", id: "A3543", h: 844, z: 60, g: "A18", r: 8, gamut: "P3", p: 23 },
            { n: "iPhone 15 Pro Max", id: "A2849", h: 932, z: 120, g: "A17", r: 8, gamut: "P3", p: 23 },
            { n: "iPhone 15 Pro", id: "A2848", h: 852, z: 120, g: "A17", r: 8, gamut: "P3", p: 23 },
            { n: "iPhone 15 Plus", id: "A2847", h: 932, z: 60, g: "A16", r: 6, gamut: "P3", p: 23 },
            { n: "iPhone 15", id: "A2846", h: 852, z: 60, g: "A16", r: 6, gamut: "P3", p: 23 },
            { n: "iPhone 14 Pro Max", id: "A2651", h: 932, z: 120, g: "A16", r: 6, gamut: "P3", p: 23 },
            { n: "iPhone 14 Pro", id: "A2650", h: 852, z: 120, g: "A16", r: 6, gamut: "P3", p: 23 },
            { n: "iPhone 14 Plus", id: "A2632", h: 926, z: 60, g: "A15", r: 6, gamut: "P3", p: 20 },
            { n: "iPhone 14", id: "A2649", h: 844, z: 60, g: "A15", r: 6, gamut: "P3", p: 20 },
            { n: "iPhone 13 Pro Max", id: "A2484", h: 926, z: 120, g: "A15", r: 6, gamut: "P3", p: 20 },
            { n: "iPhone 13 Pro", id: "A2483", h: 844, z: 120, g: "A15", r: 6, gamut: "P3", p: 20 },
            { n: "iPhone 13", id: "A2482", h: 844, z: 60, g: "A15", r: 4, gamut: "P3", p: 20 },
            { n: "iPhone 13 mini", id: "A2481", h: 812, z: 60, g: "A15", r: 4, gamut: "P3", p: 20 },
            { n: "iPhone 12 Pro Max", id: "A2342", h: 926, z: 60, g: "A14", r: 6, gamut: "P3", p: 20 },
            { n: "iPhone 12 Pro", id: "A2341", h: 844, z: 60, g: "A14", r: 6, gamut: "P3", p: 20 },
            { n: "iPhone 12", id: "A2172", h: 844, z: 60, g: "A14", r: 4, gamut: "P3", p: 20 },
            { n: "iPhone 12 mini", id: "A2176", h: 812, z: 60, g: "A14", r: 4, gamut: "P3", p: 20 },
            { n: "iPhone SE (3rd Gen)", id: "A2595", h: 667, z: 60, g: "A15", r: 4, gamut: "P3", p: 20 },
            { n: "iPhone 11 Pro Max", id: "A2218", h: 896, z: 60, g: "A13", r: 4, gamut: "P3", p: 20 },
            { n: "iPhone 11 Pro", id: "A2097", h: 812, z: 60, g: "A13", r: 4, gamut: "P3", p: 20 },
            { n: "iPhone 11", id: "A2111", h: 896, z: 60, g: "A13", r: 4, gamut: "P3", p: 20 },
            { n: "iPhone SE (2nd Gen)", id: "A2275", h: 667, z: 60, g: "A13", r: 3, gamut: "P3", p: 20 },
            { n: "iPhone XS Max", id: "A1921", h: 896, z: 60, g: "A12", r: 4, gamut: "P3", p: 20 },
            { n: "iPhone XS", id: "A1920", h: 812, z: 60, g: "A12", r: 4, gamut: "P3", p: 20 },
            { n: "iPhone XR", id: "A1984", h: 896, z: 60, g: "A12", r: 3, gamut: "P3", p: 20 },
            { n: "iPhone X", id: "A1865", h: 812, z: 60, g: "A11", r: 3, gamut: "P3", p: 18 },
            { n: "iPhone 8 Plus", id: "A1864", h: 736, z: 60, g: "A11", r: 3, gamut: "P3", p: 18 },
            { n: "iPhone 8", id: "A1863", h: 667, z: 60, g: "A11", r: 2, gamut: "P3", p: 18 },
            { n: "iPhone 7 Plus", id: "A1661", h: 736, z: 60, g: "A10", r: 3, gamut: "P3", p: 18 },
            { n: "iPhone 7", id: "A1660", h: 667, z: 60, g: "A10", r: 2, gamut: "P3", p: 18 },
            { n: "iPhone SE (1st Gen)", id: "A1723", h: 568, z: 60, g: "A9", r: 2, gamut: "sRGB", p: 12 },
            { n: "iPhone 6s Plus", id: "A1634", h: 736, z: 60, g: "A9", r: 2, gamut: "sRGB", p: 12 },
            { n: "iPhone 6s", id: "A1633", h: 667, z: 60, g: "A9", r: 2, gamut: "sRGB", p: 12 },
            { n: "iPhone 6 Plus", id: "A1522", h: 736, z: 60, g: "A8", r: 1, gamut: "sRGB", p: 12 },
            { n: "iPhone 6", id: "A1549", h: 667, z: 60, g: "A8", r: 1, gamut: "sRGB", p: 12 }
        ];

        function addLog(msg, type = 'info') {
            const out = document.getElementById('logOutput');
            const color = type === 'success' ? 'text-green-400' : type === 'warning' ? 'text-yellow-400' : 'text-gray-400';
            out.innerHTML += `<div class="${color}">> ${msg}</div>`;
            out.scrollTop = out.scrollHeight;
        }

        async function collect6Points() {
            const gl = document.createElement("canvas").getContext("webgl");
            const ext = gl.getExtension("WEBGL_debug_renderer_info");
            const gpuStr = ext ? gl.getParameter(ext.UNMASKED_RENDERER_WEBGL) : "Blocked";
            
            // 1. Height
            const h = Math.max(window.screen.width, window.screen.height);
            // 2. Refresh Rate
            const z = await new Promise(res => {
                let frames = [], start = performance.now();
                function check(t) {
                    frames.push(t - start); start = t;
                    if (frames.length < 20) requestAnimationFrame(check);
                    else res((frames.reduce((a, b) => a + b) / frames.length) < 10 ? 120 : 60);
                }
                requestAnimationFrame(check);
            });
            // 3. GPU Gen
            const g = gpuStr.match(/A\d+/)?.[0] || "A15";
            // 4. Est RAM
            const r = navigator.deviceMemory || 4;
            // 5. Gamut
            const gamut = window.matchMedia('(color-gamut: p3)').matches ? "P3" : "sRGB";
            // 6. Precision
            const p = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).precision;

            return { h, z, g, r, gamut, p, gpuFull: gpuStr };
        }

        async function runDetection() {
            // UI State
            document.getElementById('idleState').classList.add('hidden');
            document.getElementById('loader').classList.remove('hidden');
            document.getElementById('scannerLine').classList.remove('hidden');
            document.getElementById('successState').classList.add('hidden');
            
            addLog("Starting 6-point hardware handshake...");
            const hw = await collect6Points();
            
            // Update Sidebar
            document.getElementById('sigHeight').innerText = hw.h + "pt";
            document.getElementById('sigHz').innerText = hw.z + "Hz";
            document.getElementById('sigGpu').innerText = hw.g;
            document.getElementById('sigRam').innerText = hw.r + "GB";
            document.getElementById('sigGamut').innerText = hw.gamut;
            document.getElementById('sigPrec').innerText = hw.p + "bit";

            // Scoring Engine
            let candidates = IPHONE_REGISTRY.map(device => {
                let score = 0;
                if (device.h === hw.h) score += 35;
                if (device.z === hw.z) score += 20;
                if (device.p === hw.p) score += 15;
                if (device.gamut === hw.gamut) score += 10;
                if (device.g === hw.g) score += 10;
                if (device.r === hw.r) score += 10;
                return { ...device, score };
            }).sort((a, b) => b.score - a.score);

            setTimeout(() => {
                document.getElementById('loader').classList.add('hidden');
                document.getElementById('scannerLine').classList.add('hidden');
                document.getElementById('successState').classList.remove('hidden');
                
                const top = candidates[0];
                document.getElementById('deviceName').innerText = top.n;
                document.getElementById('deviceId').innerText = top.id;
                document.getElementById('resolveMethod').innerText = `Handshake: ${top.score}% Signal Match`;
                
                // Color coding result
                const card = document.getElementById('resultCard');
                card.className = top.score > 80 ? "md:col-span-2 glass p-8 rounded-2xl relative overflow-hidden flex flex-col justify-center items-center text-center glow-success border-2" : "md:col-span-2 glass p-8 rounded-2xl relative overflow-hidden flex flex-col justify-center items-center text-center glow-warning border-2";

                // Update Probabilities
                const list = document.getElementById('candidate-list');
                list.innerHTML = candidates.slice(1, 5).map(c => `
                    <div class="glass p-3 rounded-xl flex justify-between items-center opacity-60">
                        <div class="text-left">
                            <div class="text-[11px] font-bold">${c.n}</div>
                            <div class="text-[9px] font-mono text-gray-500">${c.id}</div>
                        </div>
                        <div class="text-blue-400 font-mono text-[11px]">${c.score}%</div>
                    </div>
                `).join('');
                
                addLog(`Resolved: ${top.n} (${top.id}) with ${top.score}% confidence.`, 'success');
            }, 1000);
        }
    </script>
</body>
</html>